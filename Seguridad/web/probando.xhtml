<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form>
            <p:selectOneMenu 
                id="modulos" 
                style="width: 230px"
                value="#{mbSeguridad.mbModulos.modulo}">
                <f:selectItems value="#{mbSeguridad.mbModulos.listaModulos}"/>
                <f:converter converterId="traerModulos"/>
                <p:ajax listener="#{mbSeguridad.dameModulosAcciones(0)}"
                                        event="change" 
                                        process="@this"/>
            </p:selectOneMenu>

            <p:commandButton icon="ui-icon-plus" 
                             style="height: 33px; width: 20px"
                             oncomplete="modulo.show();" 
                             process="@this modulos"
                             actionListener="#{mbSeguridad.cargarDatos()}"
                             update="panelPrincipal"
                             />
            <p:dialog showEffect="explode"
                      modal="true" 
                      header="Altas de Modulos" 
                      widgetVar="modulo" 
                      hideEffect="explode"
                      id="panelModulos">
                <p:ajax event="close" listener="#{mbSeguridad.limpiarAltasModulos()}"
                        process="@this"
                        update="panelPrincipal"/>
                <h:panelGrid  id="panelPrincipal" columns="3">
                    <p:outputLabel value="Modulo: "/>
                    <p:inputText id="modulo" value="#{mbSeguridad.mbModulos.modulo.modulo}"/>
                    <p:outputLabel/>
                    <p:outputLabel value="Url: "/>
                    <p:inputText id="url" value="#{mbSeguridad.mbModulos.modulo.url}"/>
                    <p:outputLabel/>
                    <p:outputLabel value="Modulo Menu: "/>
                    <p:selectOneMenu id="moduloMenu" 
                                     style="width: 210px" 
                                     value="#{mbSeguridad.mbModulos.moduloMenucmb23}">
                        <f:selectItems value="#{mbSeguridad.mbModulos.moduloMenuCmb2}"/>
                        <f:converter converterId="traerModulosMenus"/>
                        <p:ajax event="change" 
                                listener="#{mbSeguridad.mbModulos.dameValoresModuloChange()}"
                                />
                    </p:selectOneMenu>
                    <p:commandButton  icon="ui-icon-plus" 
                                      style="height: 33px; width: 20px"
                                      actionListener="#{mbSeguridad.control()}"
                                      />
                    
                </h:panelGrid>
                <p:commandButton 
                    icon="ui-icon-disk"
                    value="Guardar"
                    action="#{mbSeguridad.guardarValoresModulo()}" 
                    update="panelPrincipal">
                </p:commandButton> 
                <p:separator/>
            </p:dialog>
        </h:form>
    </h:body>
</html>

